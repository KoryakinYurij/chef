# Architecture

**System Architecture:**
Chef is a full-stack application with a client-server architecture. The main components are:
- **Frontend (`app/`):** A Remix/React single-page application that provides the user interface for interacting with the AI agent.
- **Backend (`convex/`):** A Convex backend that manages the database, user authentication, and serverless functions.
- **AI Agent (`chef-agent/`):** A Node.js-based agent that orchestrates the code generation process by interacting with various AI models.
- **CLI (`chefshot/`):** A command-line interface for interacting with the Chef web application.
- **Project Template (`template/`):** A boilerplate template used as a starting point for all new projects generated by Chef.

**Key Technical Decisions:**
- **Reactive Database:** The use of Convex provides a real-time, reactive database, which simplifies state management and enables real-time features in the generated applications.
- **Serverless Functions:** The backend logic is implemented as serverless functions in Convex, which allows for a scalable and maintainable architecture.
- **AI Model Integration:** The application is designed to be model-agnostic, with support for multiple AI providers.
- **Context Compression:** A multi-level context compression system is in place to manage large chat histories. It combines semantic compression on the agent side with LZ4 compression on the backend.

**Component Relationships:**
- The frontend `app` communicates with the `convex` backend for data persistence and user management.
- The `chef-agent` is invoked by the backend to handle code generation requests. It takes a user prompt, interacts with the selected AI model, and returns the generated code.
- The `chefshot` CLI provides an alternative way to interact with the application, likely by making API calls to the backend.
- The `ContextCompressor.tsx` component in the frontend provides the UI for manual and automatic context compression.
- The `SemanticCompressor.ts` in the `chef-agent` implements the core logic for semantic compression, relevance scoring, and entity preservation.
- The `compressMessages.ts` function in `convex` uses LZ4 to compress messages for efficient storage.